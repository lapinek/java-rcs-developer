apiVersion: skaffold/v2beta26
kind: Config
metadata:
  name: rcs
build:
  artifacts:
  - image: rcs
    sync:
      infer: ["scripts/**"]
    docker:
      dockerfile: Dockerfile
      buildArgs:
        TENANT_HOSTNAME: "{{ .TENANT_HOSTNAME }}"
        ACCESS_TOKEN_URL: "{{ .ACCESS_TOKEN_URL }}"
        CLIENT_ID: "{{ .CLIENT_ID }}"
        CLIENT_SECRET: "{{ .CLIENT_SECRET }}"
      noCache: true
    hooks:
      before:
      - command: ["sh", "-c", "echo BEFORE; printenv;"]
        os: ["darwin", "linux"]
deploy:
  statusCheckDeadlineSeconds: 30
  kubectl:
    manifests:
    - rcs.yaml
